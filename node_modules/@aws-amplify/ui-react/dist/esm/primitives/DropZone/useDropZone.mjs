import{useState as e}from"react";import{isFunction as t}from"@aws-amplify/ui";function r(e,t){if(!t||0===t.length||t.includes("*"))return{acceptedFiles:e,rejectedFiles:[]};const r=[],a=[];return e.forEach((e=>{(!function({type:e=""}){const r=e.toLowerCase(),a=r.split("/")[0];return t.some((e=>{const t=e.trim().toLowerCase();return t.endsWith("/*")?a===t.split("/")[0]:r===t}))}(e)?a:r).push(e)})),{acceptedFiles:r,rejectedFiles:a}}function a({onDropComplete:a,onDragEnter:n,onDragLeave:o,onDragOver:i,onDragStart:c,onDrop:p,acceptedFileTypes:s=[]}){const[l,f]=e("inactive");return{onDragStart:e=>{e.dataTransfer.clearData(),t(c)&&c(e)},onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),t(n)&&n(e)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),f("inactive"),t(o)&&o(e)},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",t(i)&&i(e);const a=Array.from(e.dataTransfer.items).map((({kind:e,type:t})=>({kind:e,type:t}))),{rejectedFiles:n}=r(a,s);f(n.length>0?"reject":"accept")},onDrop:e=>{e.preventDefault(),e.stopPropagation(),f("inactive");const n=Array.from(e.dataTransfer.files),{acceptedFiles:o,rejectedFiles:i}=r(n,s);t(p)&&p(e),t(a)&&a({acceptedFiles:o,rejectedFiles:i})},dragState:l}}export{a as useDropZone};
